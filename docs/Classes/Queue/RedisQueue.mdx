---
id: queue-redis
title: "Class: RedisQueue"
description: The RedisQueue class represents a queue.
slug: /class/queue/RedisQueue
sidebar_label: RedisQueue
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# MemoryQueue

## Table of Contents

- [Class Definition](#class-definition)
- [Properties](#properties)
- [Constructor](#constructor)
- [Methods](#methods)

## Class Definition
```ts
export class RedisQueue implements IQueue {}
```

## Properties
> | <i className="fa-solid fa-pen"/> Property | <i className="fa-solid fa-boxes-stacked"/> Type                                                     | <i className="fa-solid fa-list"/> Description |
> | :---------------------------------------- | :---------------------------------------------------------------------------------------------------|:----------------------------------------------|
> | `redis`                                   | [`RedisClient`](https://www.npmjs.com/package/ioredis)                                              | The Redis client.                             |
> | `redisPrefix`                             | [`string`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | The Redis prefix.                             |

## Constructor

> ```js
> new MemoryQueue(guildId: string, manager: Manager)
> ```
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:--------------------------------------------------------------------------------------------------| :---------------------------------------------| :------------------------------------------:|
> | `guildId`                                      | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | The guild ID                                  | <i className="fa-solid fa-xmark"/>          |
> | `manager`                                      | [`Manager`](../Manager.mdx)                                                                       | The Manager instance.                         | <i className="fa-solid fa-xmark"/>          |

## Methods

### add()
> ```ts
> async add(track: Track | Track[], offset?: number): Promise<void>
> ```
> Adds a track or an array of tracks to the queue.
> 
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description        | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:--------------------------------------------------------------------------------------------------| :----------------------------------------------------|:-------------------------------------------:|
> | `track`                                        | [`Track`](../../Typedefs/Track.mdx) \| [`Track[]`](../../Typedefs/Track.mdx)                      | The track or an array of tracks to add to the queue. | <i className="fa-solid fa-xmark"/>          |
> | `offset`                                       | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The offset to add the track at.                      | <i className="fa-solid fa-check"/>          |

---

### addPrevious()
> ```ts
> async addPrevious(track: Track | Track[]): Promise<void>
> ```
> Adds one or more tracks to the "previous" history list.
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                       | <i className="fa-solid fa-list"/> Description    | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:-----------------------------------------------------------------------------| :------------------------------------------------|:-------------------------------------------:|
> | `track`                                        | [`Track`](../../Typedefs/Track.mdx) \| [`Track[]`](../../Typedefs/Track.mdx) | The track to add to the "previous" history list. | <i className="fa-solid fa-xmark"/>          |

---

### clear()
> ```ts
> async clear(): Promise<void>
> ```
> Clears the queue.

---

### clearPrevious()
> ```ts
> async clearPrevious(): Promise<void>
> ```
> Clears the "previous" history list.

---

### dequeue()
> ```ts
> async dequeue(): Promise<Track | undefined>
> ```
> Removes the first element from the queue.
>
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                                                                  | <i className="fa-solid fa-list"/> Description                         |
> | :----------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------|
> | [`Track`](../../Typedefs/Track.mdx) \| [undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Undefined) | The first element in the queue, or `undefined` if the queue is empty. |

---

### duration()
> ```ts
> async duration(): Promise<number>
> ```
> Returns the total duration of the queue.
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                     | <i className="fa-solid fa-list"/> Description    |
> | :-------------------------------------------------------------------------------------------------|:-------------------------------------------------|
> | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The total duration of the queue in milliseconds. |

---

### enqueueFront()
> ```ts
> async enqueueFront(track: Track | Track[]): Promise<void>
> ```
> Adds a track or an array of tracks to the front of the queue.
>
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                       | <i className="fa-solid fa-list"/> Description        | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:-----------------------------------------------------------------------------| :----------------------------------------------------|:-------------------------------------------:|
> | `track`                                        | [`Track`](../../Typedefs/Track.mdx) \| [`Track[]`](../../Typedefs/Track.mdx) | The track or an array of tracks to add to the queue. | <i className="fa-solid fa-xmark"/>          |

---

### everyAsync()
> ```ts
> async everyAsync(callback: (track: Track, index: number, array: Track[]) => boolean): Promise<boolean>
> ```
> Tests whether all elements in the queue pass the test implemented by the provided function.
> 
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:------------------------------------------------------------------------------------------------------| :---------------------------------------------|:-------------------------------------------:|
> | `callback`                                     | [Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function) | The callback function.                        | <i className="fa-solid fa-xmark"/>          |
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                       | <i className="fa-solid fa-list"/> Description                                                             |
> | :---------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------|
> | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | `true` if the callback function returns a truthy value for every element in the queue, otherwise `false`. |

---

### filterAsync()
> ```ts
> async filterAsync(callback: (track: Track, index: number, array: Track[]) => boolean): Promise<Track | undefined>
> ```
> Filters the queue.
> 
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:------------------------------------------------------------------------------------------------------| :---------------------------------------------|:-------------------------------------------:|
> | `callback`                                     | [Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function) | The callback function.                        | <i className="fa-solid fa-xmark"/>          |
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                                                                  | <i className="fa-solid fa-list"/> Description                         |
> | :----------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------|
> | [`Track`](../../Typedefs/Track.mdx) \| [undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Undefined) | The first element in the queue, or `undefined` if the queue is empty. |

---

### findAsync()
> ```ts
> async findAsync(callback: (track: Track, index: number, array: Track[]) => boolean): Promise<Track | undefined>
> ```
> Returns the first element in the queue that satisfies the provided testing function.
> 
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:------------------------------------------------------------------------------------------------------| :---------------------------------------------|:-------------------------------------------:|
> | `callback`                                     | [Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function) | The callback function.                        | <i className="fa-solid fa-xmark"/>          |
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                                                                  | <i className="fa-solid fa-list"/> Description                         |
> | :----------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------|
> | [`Track`](../../Typedefs/Track.mdx) \| [undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Undefined) | The first element in the queue, or `undefined` if the queue is empty. |

---

### getCurrent()

> ```ts
> async getCurrent(): Promise<Track | null>
> ```
> Returns the currently playing track.
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                                                        | <i className="fa-solid fa-list"/> Description        |
> | :------------------------------------------------------------------------------------------------------------------------------------| :----------------------------------------------------|
> | [`Track`](../../Typedefs/Track.mdx) \| [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Null) | The current track, or `null` if no track is playing. |

---

### getPrevious()
> ```ts
> async getPrevious(): Promise<Track[]>
> ```
> Returns the previous tracks.
>
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type | <i className="fa-solid fa-list"/> Description |
> | :---------------------------------------------| :---------------------------------------------|
> | [`Track[]`](../../Typedefs/Track.mdx)         | The previous tracks.                          |

---

### getSlice()
> ```ts
> async getSlice(start?: number, end?: number): Promise<Track[]>
> ```
> Returns a slice of the queue.
>
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description           | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:--------------------------------------------------------------------------------------------------| :-------------------------------------------------------|:-------------------------------------------:|
> | `start`                                        | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | Start index of the range of tracks to remove.           | <i className="fa-solid fa-check"/>          |
> | `end`                                          | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | End index (exclusive) of the range of tracks to remove. | <i className="fa-solid fa-check"/>          |
>
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type | <i className="fa-solid fa-list"/> Description |
> | :---------------------------------------------|:----------------------------------------------|
> | [`Track[]`](../../Typedefs/Track.mdx)         | The tracks in the queue.                      |

---

### getTracks()
> ```ts
> async getTracks(): Promise<Track[]>
> ```
> Returns the tracks in the queue.
>
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type | <i className="fa-solid fa-list"/> Description |
> | :---------------------------------------------|:----------------------------------------------|
> | [`Track[]`](../../Typedefs/Track.mdx)         | The tracks in the queue.                      |

---

### mapAsync()
> ```ts
> async mapAsync<T>(callback: (track: Track, index: number, array: Track[]) => T): Promise<T[]>
> ```
> Maps the queue to an array of values.
>
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:------------------------------------------------------------------------------------------------------| :---------------------------------------------|:-------------------------------------------:|
> | `callback`                                     | [Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function) | The callback function.                        | <i className="fa-solid fa-xmark"/>          |

---

### modifyAt()
> ```ts
> async modifyAt(start: number, deleteCount = 0, ...items: Track[]): Promise<Track[]>
> ```
> Modifies a range of tracks in the queue.
>
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:--------------------------------------------------------------------------------------------------| :---------------------------------------------|:-------------------------------------------:|
> | `start`                                        | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | Start index of the range of tracks to remove. | <i className="fa-solid fa-check"/>          |
> | `deleteCount`                                  | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | Number of tracks to remove.                   | <i className="fa-solid fa-check"/>          |
> | `items`                                        | [`Track[]`](../../Typedefs/Track.mdx)                                                             | Array of tracks to insert.                    | <i className="fa-solid fa-check"/>          |
>
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type | <i className="fa-solid fa-list"/> Description |
> | :---------------------------------------------|:----------------------------------------------|
> | [`Track[]`](../../Typedefs/Track.mdx)         | The tracks in the queue.                      |

---

### popPrevious()
> ```ts
> async popPrevious(): Promise<Track | null>
> ```
> Removes and returns the last track from the "previous" history list.
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                                                        | <i className="fa-solid fa-list"/> Description                                  |
> | :------------------------------------------------------------------------------------------------------------------------------------| :------------------------------------------------------------------------------|
> | [`Track`](../../Typedefs/Track.mdx) \| [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Null) | The last track in the "previous" history list, or `null` if the list is empty. |

---

### remove()
> ```ts
> async remove(position?: number): Promise<Track[]>
> async remove(start: number, end: number): Promise<Track[]>
> ```
> Removes a track or a range of tracks from the queue.
> 
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description           | <i className="fa-solid fa-flask"/> Optional |
> |------------------------------------------------|---------------------------------------------------------------------------------------------------|---------------------------------------------------------|:-------------------------------------------:|
> | `position`                                     | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | Index of the track to remove.                           | <i className="fa-solid fa-check"/>          |
> | `start`                                        | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | Start index of the range of tracks to remove.           | <i className="fa-solid fa-xmark"/>          |
> | `end`                                          | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | End index (exclusive) of the range of tracks to remove. | <i className="fa-solid fa-xmark"/>          |
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type | <i className="fa-solid fa-list"/> Description |
> | :---------------------------------------------| :---------------------------------------------|
> | [`Track[]`](../../Typedefs/Track.mdx)         | The removed track(s).                         |

---

### roundRobinShuffle()
> ```ts
> async roundRobinShuffle(): Promise<void>
> ```
> Shuffles the queue to play tracks requested by each user one by one.

---

### setCurrent()
> ```ts
> async setCurrent(track: Track | null): Promise<void>
> ```
> Sets the currently playing track.
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                                               | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:-------------------------------------------------------------------------------------------------------------------------------------| :---------------------------------------------|:-------------------------------------------:|
> | `track`                                        | [`Track`](../../Typedefs/Track.mdx) \| [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Null) | The track to set as the current track.        | <i className="fa-solid fa-xmark"/>          |

---


### setPrevious()
> ```ts
> async setPrevious(tracks: Track[]): Promise<void>
> ```
> Sets the previous tracks.
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:---------------------------------------| :---------------------------------------------|:-------------------------------------------:|
> | `tracks`                                       | [`Track[]`](../../Typedefs/Track.mdx)  | The previous tracks to set.                   | <i className="fa-solid fa-xmark"/>          |

---

### shuffle()
> ```ts
> async shuffle(): Promise<void>
> ```
> Shuffles the queue.

---

### size()
> ```ts
> async size(): Promise<number>
> ```
> Returns the size of the queue not including the current track.
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                     | <i className="fa-solid fa-list"/> Description |
> | :-------------------------------------------------------------------------------------------------|:----------------------------------------------|
> | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The size of the queue.                        |


---

### someAsync()
> ```ts
> async someAsync(callback: (track: Track, index: number, array: Track[]) => boolean): Promise<boolean>
> ```
> Tests whether at least one element in the queue passes the test implemented by the provided function.
> 
> #### Parameters
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- |:------------------------------------------------------------------------------------------------------| :---------------------------------------------|:-------------------------------------------:|
> | `callback`                                     | [Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function) | The callback function.                        | <i className="fa-solid fa-xmark"/>          |
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                       | <i className="fa-solid fa-list"/> Description                                                                    |
> | :---------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------|
> | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | `true` if the callback function returns a truthy value for at least one element in the queue, otherwise `false`. |

---

### totalSize()
> ```ts
> async totalSize(): Promise<number>
> ```
> Returns the total size of the queue.
> 
> #### Returns
> | <i className="fa-solid fa-arrow-right"/> Type                                                     | <i className="fa-solid fa-list"/> Description |
> | :-------------------------------------------------------------------------------------------------|:----------------------------------------------|
> | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The total size of the queue.                  |

---

### userBlockShuffle()
> ```ts
> async userBlockShuffle(): Promise<void>
> ```
> Shuffles the queue to play tracks requested by each user one block at a time.