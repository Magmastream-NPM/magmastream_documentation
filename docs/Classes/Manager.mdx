---
id: manager
title: Manager
description: Manager
slug: /classes/manager
sidebar_position: 1
sidebar_label: Manager
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Constructor

<Tabs>
    <TabItem value="Manager" label="Manager : options" default>
        ```js
        new Magmastream.Manager(options: ManagerOptions)
        ```

        | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                                                                                                                | <i className="fa-solid fa-list"/> Description                                                                                                                                         |
        |:-------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        | `autoPlay`                                 | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                               | Whether players should automatically play the next song.                                                                                                                          |
        | `autoPlaySearchPlatform`                   | [`SearchPlatform`](#searchplatform)                                                                                                                                                               | The search platform autoplay should use. Failback to Youtube if not found.                                                                                                        |
        | `clientId`                                 | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) as [ClientUser.id](https://discord.js.org/docs/packages/discord.js/14.17.3/ClientUser:Class#id) | The client ID to use.                                                                                                                                                             |
        | `clientName`                               | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                 | Value to use for the `Client-Name` header.                                                                                                                                        |
        | `defaultSearchPlatform`                    | [`SearchPlatform`](#searchplatform)                                                                                                                                                               | The default search platform to use.                                                                                                                                               |
        | `lastFmApiKey`                             | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) as [apiKey](https://www.last.fm/api/authentication)                                       | The last.fm API key. If you need to create one go [here](https://www.last.fm/api/account/create) or if you already have one, get it from [here](https://www.last.fm/api/accounts) |
        | `nodes`                                    | [`Node[]`](../Typedefs/NodeOptions.mdx)                                                                                                                                                           | The array of nodes to connect to.                                                                                                                                                 |
        | `plugins`                                  | [`Plugin[]`](./Plugin.mdx)                                                                                                                                                                        | A array of plugins to use.                                                                                                                                                        |
        | `replaceYouTubeCredentials`                | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                               | Whether the YouTube video titles should be replaced if the Author does not exactly match.                                                                                         |
        | `send`                                     | [function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function) as [send()](#send)                                                                          | Function to send data to the websocket.                                                                                                                                           |
        | `trackPartial`                             | [`string[]`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)                                                                                                                                                                                                  | An array of track properties to keep. `track` will always be present.                                                                                                                                                                                  |
        | `usePriority`                              | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                                                                                                                                                                                                    | Use priority mode over least amount of player or load?                                                                                                                                                                                  |
        | `useNode`                                  | [`useNode`](../Typedefs/useNode.mdx)                                                                                                                                                                                                  |  Use the least amount of players or least load?                                                                                                                                                                                 |

        ### send()
        <Tabs>
            <TabItem value="Parameters" label="Parameters" default>

                > Function to send data to the websocket.
                >
                > | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description |
                > | :--------------------------------------------- | :------------------------------------------------------------------------------------------------ | :-------------------------------------------- |
                > | `id`                                           | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | The ID of the node to send the data to.       |
                > | `payload`                                      | [`Payload`](../Typedefs/Payload.mdx)                                                              | The payload to send                           |

            </TabItem>
            <TabItem value="Default usage" label="Default usage" default>
                ```js
                    new Magmastream.Manager({
                        ...ManagerOptions,
                        send: (id, payload) => {
                            const guild = client.guilds.cache.get(id);
                            // NOTE: FOR ERIS YOU NEED JSON.stringify() THE PAYLOAD
                            if (guild) guild.shard.send(payload);
                        },
                    })
                ```
            </TabItem>
        </Tabs>
    </TabItem>

</Tabs>

## Table of contents

| <i className="fa-solid fa-pen"/> Properties | <i className="fa-solid fa-boxes-stacked"/> Methods | <i className="fa-regular fa-calendar"/> Events | <i className="fa-solid fa-arrow-right-from-bracket"/> Typedefs |
|:--------------------------------------------|:---------------------------------------------------|:-----------------------------------------------|:---------------------------------------------------------------|
| [players](#players)                         | [create()](#create)                                | [chapterStarted](#chapterstarted)              |  [`playerOptions{}`](#playeroptions)                                                              |
| [nodes](#nodes)                             | [createNode()](#createnode)                        | [chaptersLoaded](#chaptersloaded)              |                                                                |
| [options](#options)                         | [decodeTrack()](#decodetrack)                      | [debug](#debug)                                |                                                                |
|                                             | [decodeTracks()](#decodetracks)                    | [nodeConnect](#nodeconnect)                    |                                                                |
|                                             | [destroy()](#destroy)                              | [nodeCreate](#nodecreate)                      |                                                                |
|                                             | [destroyNode()](#destroynode)                      | [nodeDestroy](#nodedestroy)                    |                                                                |
|                                             | [init()](#init)                                    | [nodeDisconnect](#nodedisconnect)              |                                                                |
|                                             | [get()](#get)                                      | [nodeError](#nodeerror)                        |                                                                |
|                                             | [on()](#on)                                        | [nodeRaw](#noderaw)                            |                                                                |
|                                             | [savePlayerState()](#saveplayerstate)              | [nodeReconnect](#nodereconnect)                |                                                                |
|                                             | [search()](#search)                                | [playerCreate](#playercreate)                  |                                                                |
|                                             | [updateVoiceState()](#updatevoicestate)            | [playerDestroy](#playerdestroy)                |                                                                |
|                                             | [useableNodes()](#useablenodes)                    | [playerDisconnect](#playerdisconnect)          |                                                                |
|                                             |                                                    | [playerMove](#playermove)                      |                                                                |
|                                             |                                                    | [playerStateUpdate](#playerstateupdate)        |                                                                |
|                                             |                                                    | [queueEnd](#queueend)                          |                                                                |
|                                             |                                                    | [segmentSkipped](#segmentskipped)              |                                                                |
|                                             |                                                    | [segmentsLoaded](#segmentsloaded)              |                                                                |
|                                             |                                                    | [socketClosed](#socketclosed)                  |                                                                |
|                                             |                                                    | [trackEnd](#trackend)                          |                                                                |
|                                             |                                                    | [trackEndReason](#trackendreason)              |                                                                |
|                                             |                                                    | [trackEndReasonData](#trackendreasondata)      |                                                                |
|                                             |                                                    | [trackEndReasonRaw](#trackendreasonraw)        |                                                                |
|                                             |                                                    | [trackError](#trackerror)                      |                                                                |
|                                             |                                                    | [trackStart](#trackstart)                      |                                                                |
|                                             |                                                    | [trackStuck](#trackstuck)                      |                                                                |

## Properties

### players

<span className="info badge">readonly</span>

> The map of players.
>
> Returns: [Collection](https://discord.js.org/docs/packages/collection/main/Collection:class)\<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String), [`Player`](./Player.mdx)>

### nodes

<span className="info badge">readonly</span>

> The map of nodes.
>
> Returns: [Collection](https://discord.js.org/docs/packages/collection/main/Collection:class)\<[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String), [`Node`](./Node.mdx)>

### options

<span className="info badge">readonly</span>

> The options that were set.
>
> Returns: [`karaokeOptions{}`](#karaokeoptions) | [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Null)

## Methods

### create()

> Creates a player or returns one if it already exists.<br/><br/>
> This filter sets the equalizer bands to the values defined in the `bassBoostEqualizer` array.
>
> Returns: [`Player`](./Player.mdx)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :------------------------------------- | :-------------------------------------------- |
> | `options`                                      | [`playerOptions{}`](#playeroptions)    | The options to create the player with.        |

### createNode()

> Creates a new node or returns an existing one if it already exists.<br/><br/>
>
> Returns: [`Node`](../Classes/Node.mdx)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :------------------------------------- | :-------------------------------------------- |
> | `options`                                      | [`nodeOptions{}`](#nodeoptions)    | The options to create the node with.        |

### decodeTrack()

> Decodes a base64 encoded track and returns a TrackData.<br/><br/>
>
> Returns: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)[\<`trackData{}`>](#trackdata)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                                                                                  | <i className="fa-solid fa-list"/> Description |
> |:-----------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------|
> | `track`                                        | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) as [base64](https://developer.mozilla.org/en-US/docs/Glossary/Base64) | The base64 encoded track string.              |

### decodeTracks()

> Decodes an array of base64 encoded tracks and returns an array of TrackData.<br/><br/>
> Emits a debug event with the tracks being decoded.
>
> Returns: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)[\<`trackData{}[]`>](#trackdata)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                                                                                  | <i className="fa-solid fa-list"/> Description |
> |:-----------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------|
> | `tracks`                                        | [string[]](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) as [base64](https://developer.mozilla.org/en-US/docs/Glossary/Base64) | The base64 encoded track string.              |


### destroy()

> Destroys a player if it exists and cleans up inactive players.<br/>
>
> Returns: [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                                                                                                 | <i className="fa-solid fa-list"/> Description |
> |:-----------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------|
> | `guild`                                        | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) as [GuildId](https://discord.js.org/docs/packages/discord.js/14.17.3/Guild:Class#id) | The guild ID of the player to destroy.        |

### destroyNode()

> Destroys a node if it exists. Emits a debug event if the node is found and destroyed.<br/>
>
> Returns: [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description |
> |:-----------------------------------------------|:--------------------------------------------------------------------------------------------------|:----------------------------------------------|
> | `identifier`                                   | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | The identifier of the node to destroy.        |

### init()

> Initiates the Manager.<br/><br/>
>
> Returns: [this](#properties)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                                                                                                                           | <i className="fa-solid fa-list"/> Description |
> |:-----------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------|
> | `clientId`                                     | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) as [ClientUserId](https://discord.js.org/docs/packages/discord.js/14.17.3/ClientUser:Class#id) | The Discord client ID (required).             |

### get()

> Returns a player or undefined if it does not exist.<br/>
>
> Returns: [`Player`](./Player.mdx) | [undefined](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Undefined)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type | <i className="fa-solid fa-list"/> Description                                                                                      |
> | :--------------------------------------------- | :------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------- |
> | `guild`                                        | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) as [GuildId](https://discord.js.org/docs/packages/discord.js/14.17.3/Guild:Class#id)    | The guild ID of the player to retrieve. |

### on()

> Attaches an event listener to the manager.<br/><br/>
> This method takes an optional `karaokeOptions` object as a parameter, which can be used to customize the karaoke effect.
> If no options are provided, the filter will be reset and the karaoke effect will be disabled.
>
> Returns: [this](#properties)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :------------------------------------- | :-------------------------------------------- |
> | `event`                                      | [events](#events)  | The event to listen for.                 |
> | `listener`                                      | [`karaokeOptions{}`](#karaokeoptions)  |  The function to call when the event is emitted.                 |

### savePlayerState()

> Applies the karaoke options specified by the filter.<br/><br/>
> This method takes an optional `karaokeOptions` object as a parameter, which can be used to customize the karaoke effect.
> If no options are provided, the filter will be reset and the karaoke effect will be disabled.
>
> Returns: [this](#properties)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type  | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :-------------------------------------- | :-------------------------------------------- |
> | `rotation`                                     | [`rotationOptions{}`](#rotationoptions) | The rotation options to apply.                |

### search()

> Applies the timescale options specified by the filter.<br/><br/>
> This method sets the timescale of the audio player using the provided timescale options. Timescale options may include speed, pitch, and rate
> adjustments to modify the playback characteristics of the audio.
>
> Returns: [this](#properties)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type    | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :---------------------------------------- | :-------------------------------------------- |
> | `timescale`                                    | [`timescaleOptions{}`](#timescaleoptions) | The timescale options to apply.               |

### updateVoiceState()

> Applies the vibrato options specified by the filter.<br/><br/>
> This method takes an optional `vibratoOptions` object as a parameter, which can be used to customize the vibrato effect.
> If no options are provided, the filter will be reset and the vibrato effect will be disabled.
>
> Returns: [this](#properties)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type    | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :---------------------------------------- | :-------------------------------------------- |
> | `timescale`                                    | [`timescaleOptions{}`](#timescaleoptions) | The timescale options to apply.               |

### useableNodes()

> Applies the slow motion audio effect.<br/><br/>
> This filter sets the timescale of the player to 0.7 speed, 1.0 pitch, and 0.8 rate.
>
> Returns: [this](#properties)

## Typedefs

### distortionOptions\{}

> Distortion options object as a parameter, which can be used to customize the distortion effect.
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description       |
> | :--------------------------------------------- | :------------------------------------------------------------------------------------------------ | :-------------------------------------------------- |
> | `sinOffset`                                    | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The sine offset value for the distortion effect.    |
> | `sinScale`                                     | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The sine scale value for the distortion effect.     |
> | `cosOffset`                                    | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The cosine offset value for the distortion effect.  |
> | `cosScale`                                     | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The cosine scale value for the distortion effect.   |
> | `tanOffset`                                    | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The tangent offset value for the distortion effect. |
> | `tanScale`                                     | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The tangent scale value for the distortion effect.  |
> | `offset`                                       | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The offset value for the distortion effect.         |
> | `scale`                                        | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The scale value for the distortion effect.          |

### karaokeOptions\{}

> Options for applying karaoke effect to audio.
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :------------------------------------------------------------------------------------------------ | :-------------------------------------------- |
> | `level`                                        | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The level of karaoke effect.                  |
> | `monoLevel`                                    | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The mono level of karaoke effect.             |
> | `filterBand`                                   | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The filter band of karaoke effect.            |
> | `filterWidth`                                  | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The filter width of karaoke effect.           |

### rotationOptions\{}

> Options for applying rotation effect to audio.
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :------------------------------------------------------------------------------------------------ | :-------------------------------------------- |
> | `rotationHz`                                   | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The rotation speed in Hertz (Hz).             |

### timescaleOptions\{}

> Options for adjusting the timescale of audio.
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :------------------------------------------------------------------------------------------------ | :-------------------------------------------- |
> | `speed`                                        | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The speed factor for the timescale.           |
> | `pitch`                                        | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The pitch factor for the timescale.           |
> | `rate`                                         | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The rate factor for the timescale.            |

### vibratoOptions\{}

> Options for applying vibrato effect to audio.
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                            | <i className="fa-solid fa-list"/> Description |
> | :--------------------------------------------- | :------------------------------------------------------------------------------------------------ | :-------------------------------------------- |
> | `frequency`                                    | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The frequency of the vibrato effect.          |
> | `depth`                                        | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | The depth of the vibrato effect.              |

### availableFilters''

> Available filters for the player.
>
> `bassboost` `distort` `eightD` `karaoke` `nightcore` `slowmo` `soft` `trebleBass` `tv` `vaporwave`
