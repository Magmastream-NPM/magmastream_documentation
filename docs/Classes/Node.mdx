---
id: node-class
title: "Class: Node"
description: The Node class represents a Lavalink node.
slug: /class/Node
sidebar_label: Node
sidebar_position: 3
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Constructor {#constructor}

<Tabs>
    <TabItem value="node" label="Node : options" default>
        ```js
        new Magmastream.Node(options: NodeOptions)
        ```

        | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                              | <i className="fa-solid fa-list"/> Description                        | <i className="fa-flask fa-solid"/> Optional |
        |:-----------------------------------------------|:----------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------|:-------------------------------------------:|
        | `host`                                         | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)   | The host for the node.                                               |     <i className="fa-solid fa-xmark"/>      |
        | `port`                                         | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)   | The port for the node.                                               |     <i className="fa-solid fa-check"/>      |
        | `password`                                     | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)   | The password for the node.                                           |     <i className="fa-solid fa-check"/>      |
        | `useSSL`                                       | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | Whether the host uses SSL.                                           |     <i className="fa-solid fa-check"/>      |
        | `identifier`                                   | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)   | The identifier for the node.                                         |     <i className="fa-solid fa-check"/>      |
        | `maxRetryAttempts`                             | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)   | The retryAmount for the node.                                        |     <i className="fa-solid fa-check"/>      |
        | `retryDelayMs`                                 | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)   | The retryDelay for the node.                                         |     <i className="fa-solid fa-check"/>      |
        | `enableSessionResumeOption`                    | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | Whether to resume the previous session.                              |     <i className="fa-solid fa-check"/>      |
        | `sessionTimeoutMs`                             | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)   | The time the lavalink server will wait before it removes the player. |     <i className="fa-solid fa-check"/>      |
        | `apiRequestTimeoutMs`                          | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)   | The timeout used for api calls.                                      |     <i className="fa-solid fa-check"/>      |
        | `nodePriority`                                 | [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)   | Priority of the node.                                                |     <i className="fa-solid fa-check"/>      |
        | `isNodeLink`                                   | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | is this node a Nodelink server?                                      |     <i className="fa-solid fa-check"/>      |
        | `isBackup`                                     | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | is this node a backup node?                                          |     <i className="fa-solid fa-check"/>      |

    </TabItem>
</Tabs>

## Table of contents {#toc}

| <i className="fa-solid fa-pen"/> Properties | <i className="fa-solid fa-boxes-stacked"/> Methods  |
|:--------------------------------------------|:----------------------------------------------------|
| [socket](#socket)                           | [address()](#address)                               |
| [stats](#stats)                             | [connected()](#connected)                           |
| [manager](#manager)                         | [connect()](#connect)                               |
| [sessionId](#sessionId)                     | [createSessionIdsFile()](#createSessionIdsFile)     |
| [rest](#rest)                               | [deleteSponsorBlock()](#deleteSponsorBlock)         |
| [info](#timescale)                          | [destroy()](#destroy)                               |
|                                             | [fetchInfo()](#fetchInfo)                           |
|                                             | [getLyrics()](#getLyrics)                           |
|                                             | [getSponsorBlock()](#getSponsorBlock)               |
|                                             | [loadSessionIds()](#loadSessionIds)                 |
|                                             | [setSponsorBlock()](#setSponsorBlock)               |
|                                             | [updateSessionId()](#updateSessionId)               |

## Properties {#properties}

### socket {#socket}

> The socket for the node.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [WebSocket](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket) | [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Null)

---

### stats {#stats}

> The stats for the node.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [`nodeStats{}`](../Typedefs/Node/nodeStats.mdx#nodeStats)

---

### manager {#manager}

> The manager for the node.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [`Manager`](./Manager.mdx)

---

### sessionId {#sessionId}

> The node's session ID.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Null)

---

### rest {#rest}

<span className="info badge">readonly</span>

> The REST instance.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [`Rest`](./Rest.mdx)

---

### info {#info}

> Actual Lavalink information of the node.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [`lavalinkInfo{}`](../Typedefs/LavalinkInfo.mdx#lavalinkInfo) | [null](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Null)

## Methods {#methods}

### address() {#address}

<span className="info badge">get</span>

> Returns the address for this node.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)

---

### connected() {#connected}

<span className="info badge">get</span>

> Returns if connected to the Node.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)

---

### connect() {#connect}

> Connects to the Node.<br/><br/>
> If the node is already connected, this method will do nothing.<br/>
> If the node has a session ID, it will be sent in the headers of the WebSocket connection.<br/>
> If the node has no session ID but the `resumeStatus` option is true, it will use the session ID<br/>
> stored in the sessionIds.json file if it exists.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)

---

### createSessionIdsFile() {#createSessionIdsFile}

> Creates the sessionIds.json file if it doesn't exist. This file is used to store the session IDs for each node. The session IDs are used to identify the node when resuming a session.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)

---

### deleteSponsorBlock(player) {#deleteSponsorBlock}

> Deletes the sponsorblock segments for a player.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)[\<void>](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- | :------------------------------------- | :-------------------------------------------- | :-----------------------------------------: |
> | `player`                                       | [`Player`](./Player.mdx)               | The player to delete the sponsorblocks for.   |   <i className="fa-solid fa-xmark"/>      |

---

### destroy() {#destroy}

<span className="warning badge">async function</span>

> Destroys the node and cleans up associated resources.<br/><br/>
> This method emits a debug event indicating that the node is being destroyed and attempts to automatically move all players connected to the node to a usable one. It then closes the WebSocket connection, removes all event listeners, and clears the reconnect timeout. Finally, it emits a "nodeDestroy" event and removes the node from the manager.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)[\<void>](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)

---

### fetchInfo() {#fetchInfo}

<span className="warning badge">async function</span>

> Fetches Lavalink node information.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)[\<`lavalinkInfo{}`>](../Typedefs/LavalinkInfo.mdx)

---

### getLyrics(track, skipTrackSource) {#getLyrics}

<span className="warning badge">async function</span>

> Fetches the lyrics of a track from the Lavalink node.<br/><br/>
> This method uses the `lavalyrics-plugin` to fetch the lyrics. If the plugin is not available, it will throw a RangeError.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)[\<`lyrics{}`>](../Typedefs/Node/lyrics.mdx)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                                                              | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> |:-----------------------------------------------|:----------------------------------------------------------------------------------------------------|:----------------------------------------------|:-------------------------------------------:|
> | `track`                                        | [`track{}`](../Typedefs/Track/trackOptions.mdx#trackOptions)                                        | The track to fetch the lyrics for.            |     <i className="fa-solid fa-xmark"/>      |
> | `skipTrackSource`                              | [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | Whether to skip using the track's source URL. |     <i className="fa-solid fa-check"/>      |

---

### getSponsorBlock(player) {#getSponsorBlock}

<span className="warning badge">async function</span>

> Gets the current sponsorblock segments for a player.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)[\<`sponsorBlockSegment[]`>](../Typedefs/SponsorBlock/sponsorBlockSegment.mdx)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type | <i className="fa-solid fa-list"/> Description | <i className="fa-solid fa-flask"/> Optional |
> |:-----------------------------------------------|:---------------------------------------|:----------------------------------------------|:-------------------------------------------:|
> | `player`                                       | [`Player`](./Player.mdx)               | The player to get the sponsor blocks for.     |     <i className="fa-solid fa-xmark"/>      |

---

### loadSessionIds() {#loadSessionIds}

> Loads session IDs from the sessionIds.json file if it exists. The session IDs are used to resume sessions for each node.<br/><br/>
> The session IDs are stored in the sessionIds.json file as a composite key of the node identifier and cluster ID. This allows multiple clusters to be used with the same node identifier.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)

---

### setSponsorBlock(player, segments) {#setSponsorBlock}

<span className="warning badge">async function</span>

> Updates the session ID in the sessionIds.json file.<br/><br/>
> This method is called after the session ID has been updated, and it writes the new session ID to the sessionIds.json file.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)[\<void>](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)
>
> | <i className="fa-solid fa-hashtag"/> Parameter | <i className="fa-solid fa-font"/> Type                              | <i className="fa-solid fa-list"/> Description                                             | <i className="fa-solid fa-flask"/> Optional |
> | :--------------------------------------------- | :------------------------------------------------------------------ | :---------------------------------------------------------------------------------------- | :-----------------------------------------: |
> | `player`                                       | [`Player`](./Player.mdx)                                            | The player to set the sponsor blocks for.                                                 |    <i className="fa-solid fa-xmark"/>      |
> | `segments`                                     | [<i className="fa-solid fa-bars-staggered" /> SponsorBlockSegment[]](../Enums/SponsorBlockSegment.mdx) | The sponsorblock segments to set. Defaults to `["sponsor", "selfpromo"]` if not provided. |   <i className="fa-solid fa-xmark"/>      |

---

### updateSessionId() {#updateSessionId}

> Updates the session ID in the sessionIds.json file.<br/><br/>
> This method is called after the session ID has been updated, and it writes the new session ID to the sessionIds.json file.
>
> <i className="fa-solid fa-right-to-bracket"/> Return: [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void)
